<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="partials/head.html :: head ('Single Book Page')"></head>
<body>
<!--  Navigation  -->

<!--Logged in User-->
<div sec:authorize="isAuthenticated()">
	<header th:replace="partials/navbar.html :: LoggedInNavbar"></header>
</div>

<!--Anonymous User-->
<div sec:authorize="isAnonymous()">
	<header th:replace="partials/navbar.html :: LoggedOutNavbar"></header>
</div>



<header class="mainBGSearch shadow pb-3">
	<h1 class="text-center pt-5 display-2"> Search For any Book</h1>
	<section id="search" class="results d-flex justify-content-center">
		<input id="search-box" type="search" class="search-box form-control rounded w-50"  placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
		<div class="list-book search">
			<div class="dropdown"></div>
		</div>
	</section>
</header>
<!-- BOOK LIST DISPLAY -->
<!-- Card Container -->
<main class="bg-dark w-100 container-fluid row d-flex justify-content-center mx-auto py-5">
	<!-- Start of Card  -->
	<div class="card shadow border bg-light col-12 col-sm-5 m-3 col-md-3" id="BookCardBG">
		<!--		<h5 class="card-title text-center p-0 py-2 w-100 h-25 mx-auto m-0" th:text="${book.title}"></h5>-->
		<!--Book Section -->
		<section class="d-flex justify-content-center">
			<img th:src="${book.bookImage}" th:id="BookImage" class="card-img-top rounded">
		</section>

		<!-- Stars -->
		<!--                <section class="text-center p-0 m-0" th:switch="${book.rating}">-->
		<!--                    <p th:case="'1'">-->
		<!--                        <i class="fa-solid star fa-star" value="1"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="2"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="3"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="4"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="5"></i>-->
		<!--                        <span> 1</span>-->
		<!--                    </p>-->
		<!--                    <p th:case="'2'">-->
		<!--                        <i class="fa-solid star fa-star" value="1"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="2"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="3"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="4"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="5"></i>-->
		<!--                        <span> 2</span>-->
		<!--                    </p>-->
		<!--                    <p th:case="'3'">-->
		<!--                        <i class="fa-solid star fa-star" value="1"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="2"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="3"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="4"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="5"></i>-->
		<!--                        <span> 3</span>-->
		<!--                    </p>-->
		<!--                    <p th:case="'4'">-->
		<!--                        <i class="fa-solid star fa-star" value="1"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="2"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="3"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="4"></i>-->
		<!--                        <i class="fa-regular star fa-star" value="5"></i>-->
		<!--                        <span> 4</span>-->
		<!--                    </p>-->
		<!--                    <p th:case="'5'">-->
		<!--                        <i class="fa-solid star fa-star" value="1"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="2"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="3"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="4"></i>-->
		<!--                        <i class="fa-solid star fa-star" value="5"></i>-->
		<!--                        <span> 5</span>-->
		<!--                    </p>-->
		<!--                    &lt;!&ndash; To display checked star rating icons &ndash;&gt;-->
		<!--                </section>-->
		<!--  Card Body  -->
		<p class="card-text text-center mx-auto text-truncate w-100 h-100" th:text="${book.author}"> </p>


	</div>
	<!-- End of Card --->
</main>
<p th:text="${book.description}"> </p>

<form th:action="@{/books/{id}/review(id=${book.id})}">
	<button type="submit">Write a Review</button>
</form>

<main class="w-75">
	<section class="text-center my-5 pb-3 container-fluid my-5">
		<h2 class="fw-light pt-3">Everyday <strong class="fw-bolder">Reviews</strong></h2>

		<!--User Review Container	-->
		<div class="row d-flex flex-nowrap container overflow-scroll mx-auto">
			<!-- Card One -->
			<div class="col-md-3 col mb-3 wholeCard" th:each="review : ${reviewsList}">
				<!-- Start of Card  -->
				<div class="card m-2 shadow  w-100 w-md-25">
					<!-- HEADER -->
					<div class="d-flex w-100 h-25">
						<!-- Username -->
						<a th:href="|/profile/${review.getUser().getUsername()}|"> <p class="pt-4" th:text="${review.user.username}"></p></a>
					</div>
					<!--Book Section -->
					<div class="d-flex justify-content-center">
						<img th:src="${review.allBookTable.bookImage}">
					</div>
					<!-- Stars -->
					<div class="text-center my-2" th:switch="${review.rating}">
						<p th:case="'1'">
							<i class="fa-solid star fa-star" value="1"></i>
							<i class="fa-regular star fa-star" value="2"></i>
							<i class="fa-regular star fa-star" value="3"></i>
							<i class="fa-regular star fa-star" value="4"></i>
							<i class="fa-regular star fa-star" value="5"></i>
							<span> 1</span>
						</p>
						<p th:case="'2'">
							<i class="fa-solid star fa-star" value="1"></i>
							<i class="fa-solid star fa-star" value="2"></i>
							<i class="fa-regular star fa-star" value="3"></i>
							<i class="fa-regular star fa-star" value="4"></i>
							<i class="fa-regular star fa-star" value="5"></i>
							<span> 2</span>
						</p>
						<p th:case="'3'">
							<i class="fa-solid star fa-star" value="1"></i>
							<i class="fa-solid star fa-star" value="2"></i>
							<i class="fa-solid star fa-star" value="3"></i>
							<i class="fa-regular star fa-star" value="4"></i>
							<i class="fa-regular star fa-star" value="5"></i>
							<span> 3</span>
						</p>
						<p th:case="'4'">
							<i class="fa-solid star fa-star" value="1"></i>
							<i class="fa-solid star fa-star" value="2"></i>
							<i class="fa-solid star fa-star" value="3"></i>
							<i class="fa-solid star fa-star" value="4"></i>
							<i class="fa-regular star fa-star" value="5"></i>
							<span> 4</span>
						</p>
						<p th:case="'5'">
							<i class="fa-solid star fa-star" value="1"></i>
							<i class="fa-solid star fa-star" value="2"></i>
							<i class="fa-solid star fa-star" value="3"></i>
							<i class="fa-solid star fa-star" value="4"></i>
							<i class="fa-solid star fa-star" value="5"></i>
							<span> 5</span>
						</p>
						<!-- To display checked star rating icons -->
					</div>
					<!--  Card Body  -->
					<div class="card-body">
						<h5 class="card-title h-25" th:text="${review.reviewTitle}"></h5>
						<p class="card-text cardText" th:text="${review.reviewBody}"></p>
					</div>

<footer th:replace="partials/footer.html :: footer"></footer>
<!--  Partials Script  -->
<script th:replace="partials/script.html :: bootstrap-js"></script>

<!--Search GB API Function: In static js directory-->
<script type="text/javascript" th:src="@{/js/main.js}"></script>
</body>
</html>